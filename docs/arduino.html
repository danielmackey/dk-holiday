<!DOCTYPE html>  <html> <head>   <title>arduino.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="arduino.html">                 arduino.coffee               </a>                                           <a class="source" href="server.html">                 server.coffee               </a>                                           <a class="source" href="client.html">                 client.coffee               </a>                                           <a class="source" href="socket.html">                 socket.coffee               </a>                                           <a class="source" href="buffer.html">                 buffer.coffee               </a>                                           <a class="source" href="job.html">                 job.coffee               </a>                                           <a class="source" href="logger.html">                 logger.coffee               </a>                                           <a class="source" href="twitter.html">                 twitter.coffee               </a>                                           <a class="source" href="worker.html">                 worker.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               arduino.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">express = </span><span class="nx">require</span> <span class="s1">&#39;express&#39;</span>
<span class="nv">SerialPort = </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;serialport&#39;</span><span class="p">).</span><span class="nx">SerialPort</span>
<span class="nv">arduino = </span><span class="nx">require</span> <span class="s1">&#39;arduino&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>board = arduino.connect('/dev/tty.usbmodemfa131')</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">connect = </span><span class="nx">require</span> <span class="s1">&#39;connect&#39;</span>
<span class="nv">colors = </span><span class="nx">require</span> <span class="s1">&#39;colors&#39;</span>
<span class="nv">app = </span><span class="nx">express</span><span class="p">.</span><span class="nx">createServer</span><span class="p">()</span>
<span class="nv">port = </span><span class="mi">1112</span>
<span class="nv">io = </span><span class="nx">require</span> <span class="s1">&#39;socket.io-client&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Arduino config</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">ledState = </span><span class="nx">arduino</span><span class="p">.</span><span class="nx">LOW</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>initialize the digital pins as an output.
board.pinMode 0, arduino.OUTPUT
board.pinMode 0, ledState
board.pinMode 1, arduino.OUTPUT
board.pinMode 1, ledState
board.pinMode 2, arduino.OUTPUT
board.pinMode 2, ledState
board.pinMode 3, arduino.OUTPUT
board.pinMode 3, ledState
board.pinMode 4, arduino.OUTPUT
board.pinMode 4, ledState
board.pinMode 5, arduino.OUTPUT
board.pinMode 5, ledState
board.pinMode 6, arduino.OUTPUT
board.pinMode 6, ledState
board.pinMode 7, arduino.OUTPUT
board.pinMode 7, ledState
board.pinMode 8, arduino.OUTPUT
board.pinMode 8, ledState
board.pinMode 9, arduino.OUTPUT
board.pinMode 9, ledState
board.pinMode 10, arduino.OUTPUT
board.pinMode 10, ledState
board.pinMode 11, arduino.OUTPUT
board.pinMode 11, ledState
board.pinMode 12, arduino.OUTPUT
board.pinMode 12, ledState
board.pinMode 13, arduino.OUTPUT
board.pinMode 13, ledState</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">socket = </span><span class="nx">io</span><span class="p">.</span><span class="nx">connect</span> <span class="s1">&#39;http://localhost:1110/arduino&#39;</span>

<span class="nx">socket</span><span class="p">.</span><span class="kc">on</span> <span class="s1">&#39;action assignment&#39;</span><span class="p">,</span> <span class="nf">(job, fn) -&gt;</span>
  <span class="k">switch</span> <span class="nx">job</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">hashtag</span>
    <span class="k">when</span> <span class="s2">&quot;snow&quot;</span>
      <span class="nv">pin = </span><span class="mi">1</span>
      <span class="nv">time = </span><span class="mi">5000</span>
    <span class="k">when</span> <span class="s2">&quot;lights&quot;</span>
      <span class="nv">pin = </span><span class="mi">13</span>
      <span class="nv">time = </span><span class="mi">5000</span>
    <span class="k">when</span> <span class="s2">&quot;train&quot;</span>
      <span class="nv">pin = </span><span class="mi">3</span>
      <span class="nv">time = </span><span class="mi">5000</span>
    <span class="k">when</span> <span class="s2">&quot;discoball&quot;</span>
      <span class="nv">pin = </span><span class="mi">4</span>
      <span class="nv">time = </span><span class="mi">10000</span>
    <span class="k">when</span> <span class="s2">&quot;fan&quot;</span>
      <span class="nv">pin = </span><span class="mi">5</span>
      <span class="nv">time = </span><span class="mi">10000</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>board.digitalWrite pin, ledState = arduino.HIGH # on
setTimeout(board.digitalWrite(pin, ledState = arduino.LOW), time) # off</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;#{&quot;</span><span class="err">âœ“</span> <span class="s2">&quot;.green} ##{job.data.hashtag.rainbow} by @#{job.data.handle.cyan}&quot;</span>
  <span class="nx">fn</span> <span class="nx">job</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 